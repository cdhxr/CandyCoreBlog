/* ========== 字体导入 ========== */
/* LXGW WenKai 霞鹜文楷 - 使用 CDN */
@import url('https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css');

/* Noto Serif SC (思源宋体) - 使用 Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;300;400;500;600;700;900&display=swap');

/* Outfit 英文字体 - 使用 Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap');

/* ========== Tailwind CSS v4 配置 ========== */
@import 'tailwindcss/theme.css';
@import 'tailwindcss/utilities.css';

/* ========== 基础样式重置 ========== */
*,
::after,
::before,
::backdrop,
::file-selector-button {
  border-color: var(--border, currentColor);
}

* {
  scrollbar-width: thin;
}

html {
  font: var(--ifm-font-size-base) / var(--ifm-line-height-base)
    var(--ifm-font-family-base);
}

/* ========== Tailwind 主题映射 ========== */
@keyframes gradient {
  to {
    background-position: var(--bg-size, 300%) 0;
  }
}

/* ========== shadcn 主题变量 ========== */
:root {
  /* Tailwind 颜色映射 */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --animate-gradient: gradient 8s linear infinite;

  /* --- shadcn 主题变量 --- */
  --radius: 0.65rem;
  --background: oklch(100% 0.00011 271.152 / 0.948);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  /* 与 Docusaurus --ifm-color-primary: #1963ae 保持一致 */
  --primary: #1963ae;
  --primary-foreground: #ffffff;
  --secondary: oklch(0.97 0.014 254.604);
  --secondary-foreground: #1963ae;
  --muted: oklch(0.97 0.014 254.604);
  --muted-foreground: oklch(0.45 0.03 250);
  --accent: oklch(0.95 0.02 250);
  --accent-foreground: #1963ae;
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.9 0.02 250);
  --input: oklch(0.9 0.02 250);
  --ring: #1963ae;
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

html[data-theme='dark'] {
  /* --- shadcn 深色主题变量 --- */
  --background: oklch(222, 25%, 12%);
  --foreground: oklch(0.985 0 0);
  --card: oklch(20.8% 0.042 265.755);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(20.8% 0.042 265.755);
  --popover-foreground: oklch(0.985 0 0);
  /* 与 Docusaurus --ifm-color-primary: #b3f2ff 保持一致 */
  --primary: #b3f2ff;
  --primary-foreground: #0a1929;
  --secondary: oklch(0.25 0.04 250);
  --secondary-foreground: #b3f2ff;
  --muted: oklch(0.25 0.04 250);
  --muted-foreground: oklch(0.7 0.03 250);
  --accent: oklch(0.3 0.05 250);
  --accent-foreground: #b3f2ff;
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 15%);
  --input: oklch(1 0 0 / 15%);
  --ring: #b3f2ff;
  --chart-1: oklch(0.811 0.111 293.571);
  --chart-2: oklch(0.606 0.25 292.717);
  --chart-3: oklch(0.541 0.281 293.009);
  --chart-4: oklch(0.491 0.27 292.581);
  --chart-5: oklch(0.432 0.232 292.759);
  --sidebar: oklch(20.8% 0.042 265.755);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.606 0.25 292.717);
  --sidebar-primary-foreground: oklch(0.969 0.016 293.756);
  --sidebar-accent: oklch(27.9% 0.041 260.031);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.38 0.189 293.745);
}

/* ========== Docusaurus 变量覆盖 ========== */
:root {
  /* --- 字体变量 --- */
  --font-outfit: 'Outfit', system-ui, -apple-system, sans-serif;
  --font-wenkai: 'LXGW WenKai', 'Noto Serif SC', Georgia, serif;

  /* Docusaurus 默认字体使用 Outfit */
  --ifm-font-family-base: var(--font-outfit);
  --ifm-heading-font-family: var(--font-outfit);

  /* --- 亮色模式主题色 (来自 --nebula-500) --- */
  --ifm-color-primary: #1963ae;
  --ifm-color-primary-dark: #174a9d;
  --ifm-color-primary-darker: #154694;
  --ifm-color-primary-darkest: #12397a;
  --ifm-color-primary-light: #1b5abf;
  --ifm-color-primary-lighter: #1d5ec8;
  --ifm-color-primary-lightest: #236bdf;
  --ifm-background-color: hsl(0, 0%, 98%);

  /* --- NavBar 颜色自定义 --- */
  --ifm-navbar-background-color: #ffffff;
  --ifm-navbar-text-color: #333333;
  --ifm-navbar-link-color: #333333;
  --ifm-navbar-link-hover-color: #1963ae;
  --ifm-navbar-item-padding-horizontal: 12px;
  --ifm-navbar-item-padding-vertical: 8px;

  /* 你原有的设置 (保留) */
  --ifm-code-font-size: 95%;
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.1);
}

html[data-theme='dark'] {
  /* --- Docusaurus 深色主题 --- */
  --ifm-color-primary: #b3f2ff;
  --ifm-color-primary-dark: #88ebff;
  --ifm-color-primary-darker: #72e7ff;
  --ifm-color-primary-darkest: #31dcff;
  --ifm-color-primary-light: #def9ff;
  --ifm-color-primary-lighter: #f4fdff;
  --ifm-color-primary-lightest: #ffffff;
  --ifm-background-color: hsl(222, 25%, 12%);

  /* --- 深色模式 NavBar 颜色自定义 --- */
  --ifm-navbar-background-color: #1b1b1d;
  --ifm-navbar-text-color: #ffffff;
  --ifm-navbar-link-color: #ffffff;
  --ifm-navbar-link-hover-color: #b3f2ff;

  /* 你原有的设置 (保留) */
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.3);
}

/* GitHub */
.header-github-link:hover {
  opacity: 0.6;
}

.header-github-link::before {
  content: '';
  width: 24px;
  height: 24px;
  display: flex;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E")
    no-repeat;
}

html[data-theme='dark'] .header-github-link::before {
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='white' d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E")
    no-repeat;
}

/* ========== 文章内容使用霞鹜文楷 ========== */
/* 文档与博客主栏内容区域 */
.theme-doc-markdown > *,
.theme-blog-post > * {
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

/* Category 分类页面宽度限制（排除 breadcrumbs） */
[class*='generatedIndexPage_'] > header,
[class*='generatedIndexPage_'] > article,
[class*='generatedIndexPage_'] > footer {
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.markdown {
  max-width: 800px;
  /* 你期望的宽度 */
  margin: 0 auto;
  /* 基础字号加大 */
  font-size: 1.25rem; /* 20px */
}

article {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
}

/* ========== 博客页 Header 使用霞鹜文楷 ========== */
/* 博客文章标题区域 */
article header {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

article header h1,
article header h2,
[class*='blogPostTitle'],
[class*='blogPostHeader'] {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
}

/* 博客列表页标题 */
.blog-list-page header {
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.blog-list-page header h1,
.blog-list-page header h2,
[class*='blogListTitle'] {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
}

/* 文章标题 */
.markdown h1 {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
  font-size: 2.5rem; /* 40px */
}

.markdown h2 {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
  font-size: 2rem; /* 32px */
}

.markdown h3 {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
  font-size: 1.75rem; /* 28px */
}

.markdown h4,
.markdown h5,
.markdown h6 {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
  font-size: 1.5rem; /* 24px */
}

/* 文章段落和列表 */
.markdown p,
.markdown li,
.markdown blockquote {
  font-family: 'LXGW WenKai', 'Outfit', 'Noto Serif SC', Georgia, serif;
  font-size: 1.25rem; /* 20px */
  line-height: 1.8;
}

/* ========== 其他 UI 部分使用 Outfit ========== */
.navbar,
.menu,
.footer,
.pagination-nav,
.breadcrumbs,
.table-of-contents {
  font-family: var(--font-outfit);
}

/* ========== 隐藏滚动条样式 ========== */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Custom utilities for Typographic Card */
.writing-vertical-rl {
  writing-mode: vertical-rl;
  text-orientation: upright;
}

/* ========== DocSidebar 样式 (仅 Tailwind 无法处理的部分) ========== */

/* Collapse Button - CSS 变量和 hover 状态 */
:root {
  --docusaurus-collapse-button-bg: transparent;
  --docusaurus-collapse-button-bg-hover: rgb(0 0 0 / 10%);
}

[data-theme='dark']:root {
  --docusaurus-collapse-button-bg: rgba(255, 255, 255, 0.05);
  --docusaurus-collapse-button-bg-hover: rgb(255 255 255 / 10%);
}

.collapse-sidebar-button {
  background-color: var(--docusaurus-collapse-button-bg);
  border-color: var(--ifm-toc-border-color);
}

.collapse-sidebar-button:hover,
.collapse-sidebar-button:focus {
  background-color: var(--docusaurus-collapse-button-bg-hover);
}

/* RTL 支持 */
[dir='rtl'] .collapse-sidebar-button-icon {
  transform: rotate(0) !important;
}

/* Sidebar Menu - @supports scrollbar-gutter */
@supports (scrollbar-gutter: stable) {
  @media (min-width: 997px) {
    .sidebar-menu {
      padding: 0.5rem 0 0.5rem 0.5rem;
      scrollbar-gutter: stable;
    }
  }
}

/* 公告栏 margin */
.sidebar-menu-with-announcement-bar {
  margin-bottom: var(--docusaurus-announcement-bar-height);
}

/* DocSidebar - Docusaurus CSS 变量 */
@media (min-width: 997px) {
  .doc-sidebar {
    padding-top: var(--ifm-navbar-height);
    width: var(--doc-sidebar-width);
  }

  .doc-sidebar-logo {
    margin: 0 var(--ifm-navbar-padding-horizontal);
    min-height: var(--ifm-navbar-height);
    max-height: var(--ifm-navbar-height);
    color: inherit !important;
    text-decoration: none !important;
  }

  .doc-sidebar-logo img {
    margin-right: 0.5rem;
    height: 2rem;
  }
}

/* Aceternity Sidebar Item Styling */
.menu__link {
  border-radius: 0.5rem; /* rounded-md */
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  color: var(--color-foreground-muted);
  margin-bottom: 2px;
  position: relative;
  overflow: hidden;
}

.menu__link:hover {
  background-color: var(--color-muted);
  color: var(--color-foreground);
  transform: translateX(4px);
}

.menu__link--active {
  background-color: var(--color-secondary);
  color: var(--color-secondary-foreground);
  font-weight: 500;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

.menu__link--active:hover {
  background-color: var(--color-secondary);
}

/* Sub-menu alignment */
.menu__list-item--collapsed .menu__list {
  display: none;
}

/* Enhanced Scrollbar for sidebar */
.sidebar-menu::-webkit-scrollbar {
  width: 4px;
}

.sidebar-menu::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar-menu::-webkit-scrollbar-thumb {
  background-color: var(--color-border);
  border-radius: 10px;
}

.sidebar-menu::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-muted-foreground);
}

/* Removing default border on right of menu items if docusaurus has one */
.menu {
  background-color: transparent;
}

/* ========== 模板工具类和组件 ========== */

/* Blog tags utility */
.blog-tags b {
  display: none;
}

/* Background grid component */
.background-grid {
  position: relative;
  z-index: 0;
  background-color: rgb(241 245 249);
}

[data-theme='dark'] .background-grid {
  background-color: #0c1222;
}

.background-grid::before {
  position: absolute;
  inset: 0;
  z-index: -1;
  content: '';
  opacity: 0.65;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgb(226 232 240)' stroke-dasharray='5 3' transform='scale(1, -1)' %3E%3Cpath d='M0 .5H31.5V32'/%3E%3C/svg%3E");
  mask-image: linear-gradient(transparent, black, transparent);
}

.background-grid--fade-in {
  background: linear-gradient(to top, rgb(241 245 249), rgb(241 245 249));
}

[data-theme='dark'] .background-grid--fade-in {
  background: linear-gradient(to top, #0c1222, #0c1222);
}

.background-grid--fade-in::before {
  background-position: bottom left;
  mask-image: linear-gradient(transparent, black, black);
}

.background-grid--fade-out {
  background: linear-gradient(to bottom, rgb(241 245 249), rgb(241 245 249));
}

[data-theme='dark'] .background-grid--fade-out {
  background: linear-gradient(to bottom, #0c1222, #0c1222);
}

.background-grid--fade-out::before {
  mask-image: linear-gradient(black, black, transparent);
}

.background-image--fade-out {
  mask-image: linear-gradient(black, black, transparent);
}
