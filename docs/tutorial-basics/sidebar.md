
# 侧边栏（Sidebar）

创建一个侧边栏可以带来以下好处：

* 将多个相关文档组合成有序的目录结构
* 在这些文档页面上显示统一的侧边栏
* 提供“上一页 / 下一页”的分页导航按钮

要在 Docusaurus 站点上使用侧边栏，你需要做两件事：

1. 定义一个侧边栏文件（`sidebars.js` 或类似）并导出一个或多个侧边栏对象。
2. 在 `docusaurus.config.js`（通常 via `@docusaurus/plugin-docs` 或 `@docusaurus/preset-classic`）里，指定这个侧边栏文件的路径。

例如：

```js
// docusaurus.config.js
export default {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          sidebarPath: './sidebars.js',
        },
      },
    ],
  ],
};
```

> 注意：侧边栏文件在运行时是由 Node.js 执行的，所以你不能在其中使用浏览器 API、React 或 JSX。([Docusaurus][1])

---

## 默认侧边栏（Default sidebar）

如果你没有指定 `sidebarPath`，Docusaurus 会自动为你生成一个侧边栏，依据 `docs` 文件夹的文件结构来组织：

```js
// sidebars.js（自动生成示例）
export default {
  mySidebar: [
    {
      type: 'autogenerated',
      dirName: '.', // 从 docs 文件夹（或 versioned_docs/<version>）生成侧边栏
    },
  ],
};
```

也就是说，Docusaurus 会把每个子文件夹当成一个分类，把 Markdown 文件当成文档链接。([Docusaurus][1])

当然你也可以手动完全控制侧边栏结构。

---

## 侧边栏对象（Sidebar object）

一个侧边栏是由 **分类（category）**、**文档链接（doc links）** 和 **其他外部链接（link）** 构成的树型结构。

它的类型定义类似：

```ts
type Sidebar =
  | SidebarItem[]
  | { [categoryLabel: string]: SidebarItem[] }
```

一个简单的例子：

```js
// sidebars.js
export default {
  mySidebar: [
    {
      type: 'category',
      label: 'Getting Started',
      items: [
        {
          type: 'doc',
          id: 'doc1',
        },
      ],
    },
    {
      type: 'category',
      label: 'Docusaurus',
      items: [
        {
          type: 'doc',
          id: 'doc2',
        },
        {
          type: 'doc',
          id: 'doc3',
        },
      ],
    },
    {
      type: 'link',
      label: 'Learn more',
      href: 'https://example.com',
    },
  ],
};
```

这个侧边栏被命名为 `mySidebar`，它包含三个顶层条目：两个分类 + 一个外部链接。
每个分类内部又是若干文档链接。([Docusaurus][1])

此外，一个 `sidebars.js` 文件可以定义多个不同的侧边栏对象（例如为不同文档集创建不同侧边栏）。([Docusaurus][1])

---

## 主题配置（Theme configuration）

### 隐藏式侧边栏（Hideable sidebar）

你可以通过在 `docusaurus.config.js` 中设置：

```js
themeConfig: {
  docs: {
    sidebar: {
      hideable: true,
    },
  },
},
```

这样用户就可以点击折叠按钮隐藏整个侧边栏，以便更专注于内容阅读。([Docusaurus][1])

---

### 自动折叠分类（Auto-collapse sidebar categories）

使用这个配置：

```js
themeConfig: {
  docs: {
    sidebar: {
      autoCollapseCategories: true,
    },
  },
},
```

当某个分类展开时，同一级别的其他分类将自动折叠，这样界面不会显得太杂乱。([Docusaurus][1])

---

## 样式定制：给侧边栏条目添加 class 或自定义属性

### `className`

你可以给某个侧边栏条目（doc、category 等）指定 `className`，用于应用特定 CSS 样式：

```js
{
  type: 'doc',
  id: 'doc1',
  className: 'sidebar-item--highlighted',
}
```

这个条目就会带有 `sidebar-item--highlighted` 这个类名。([Docusaurus][1])

---

### `customProps`

你还能给条目附加自定义属性对象 `customProps`，这些属性会被传递给渲染该条目的 React 组件。可以用来加标记、额外样式或业务逻辑：

```js
{
  type: 'doc',
  id: 'doc1',
  customProps: {
    badges: ['new', 'green'],
    featured: true,
  },
}
```

这些自定义属性最终可以在你的主题组件里读取。([Docusaurus][1])

---

## 唯一键（key）

有时候两个侧边栏条目的其他属性（如 `label`）可能相同，Docusaurus 会建议你给它们加一个唯一的 `key`：

```js
{
  type: 'category',
  label: 'API',
  key: 'api-for-feature-1',
}
```

这个 `key` 用于生成 i18n 翻译键或在冲突时区分条目。([Docusaurus][1])

---

## 面包屑（Sidebar Breadcrumbs）

默认情况下，页面顶部会渲染面包屑导航，基于当前页面在侧边栏中的路径。

如果你想禁用面包屑，可以通过插件配置关闭：

```js
presets: [
  [
    '@docusaurus/preset-classic',
    {
      docs: {
        breadcrumbs: false,
      },
    },
  ],
],
```

这样就不会显示面包屑了。([Docusaurus][1])

---

## 复杂侧边栏示例（Real-world example）

下面是 Docusaurus 官网使用的一个更复杂的侧边栏示例，展示了分类嵌套、生成的索引页（generated-index）、文档链接、外部链接等混合结构。([Docusaurus][1])

```js
import type {SidebarsConfig} from '@docusaurus/plugin-content-docs';

const sidebars: SidebarsConfig = {
  docs: [
    'introduction',
    {
      type: 'category',
      label: 'Getting Started',
      link: {
        type: 'generated-index',
      },
      collapsed: false,
      items: [
        'installation',
        'configuration',
        'playground',
        'typescript-support',
      ],
    },
    {
      type: 'category',
      label: 'Guides',
      link: {
        type: 'generated-index',
        title: 'Docusaurus Guides',
        description:
          "Let's learn about the most important Docusaurus concepts!",
        keywords: ['guides'],
        image: '/img/docusaurus.png',
      },
      items: [
        'guides/creating-pages',
        {
          type: 'category',
          label: 'Docs',
          link: {
            type: 'doc',
            id: 'guides/docs/introduction',
          },
          items: [
            'guides/docs/create-doc',
            {
              type: 'category',
              label: 'Sidebar',
              link: {
                type: 'doc',
                id: 'guides/docs/sidebar/index',
              },
              items: [
                'guides/docs/sidebar/items',
                'guides/docs/sidebar/autogenerated',
                'guides/docs/sidebar/multiple-sidebars',
              ],
            },
            'guides/docs/versioning',
            'guides/docs/multi-instance',
          ],
        },
        'blog',
        {
          type: 'category',
          label: 'Markdown Features',
          link: {
            type: 'doc',
            id: 'guides/markdown-features/introduction',
          },
          items: [
            'guides/markdown-features/react',
            'guides/markdown-features/tabs',
            'guides/markdown-features/code-blocks',
            'guides/markdown-features/admonitions',
            'guides/markdown-features/toc',
            'guides/markdown-features/assets',
            'guides/markdown-features/links',
            'guides/markdown-features/plugins',
            'guides/markdown-features/math-equations',
            'guides/markdown-features/diagrams',
            'guides/markdown-features/head-metadata',
          ],
        },
        'styling-layout',
        'swizzling',
        'static-assets',
        'search',
        'browser-support',
        'seo',
        'using-plugins',
        'deployment',
        {
          type: 'category',
          label: 'Internationalization',
          link: {type: 'doc', id: 'i18n/introduction'},
          items: [
            {
              type: 'doc',
              id: 'i18n/tutorial',
              label: 'Tutorial',
            },
            {
              type: 'doc',
              id: 'i18n/git',
              label: 'Using Git',
            },
            {
              type: 'doc',
              id: 'i18n/crowdin',
              label: 'Using Crowdin',
            },
          ],
        },
        'guides/whats-next',
      ],
    },
    {
      type: 'category',
      label: 'Advanced Guides',
      link: {type: 'doc', id: 'advanced/index'},
      items: [
        'advanced/architecture',
        'advanced/plugins',
        'advanced/routing',
        'advanced/ssg',
        'advanced/client',
      ],
    },
    {
      type: 'category',
      label: 'Upgrading',
      link: {
        type: 'doc',
        id: 'migration/index',
      },
      items: [
        'migration/v3',
        {
          type: 'category',
          label: 'To Docusaurus v2',
          items: [
            'migration/v2/migration-overview',
            'migration/v2/migration-automated',
            'migration/v2/migration-manual',
            'migration/v2/migration-versioned-sites',
            'migration/v2/migration-translated-sites',
          ],
        },
      ],
    },
  ],
  api: [
    'cli',
    'docusaurus-core',
    {
      type: 'autogenerated',
      dirName: 'api',
    },
  ],
};

export default sidebars;
```

这个例子展示了：

* 一级文档（如 `'introduction'`）
* 分类（`type: 'category'`）
* 分类中可以嵌套子分类
* 使用 `link` 指定分类自己的索引页（例如 `generated-index` 或 指定某个 `doc`）
* 外部链接、文档链接、自动生成子结构等混合使用

